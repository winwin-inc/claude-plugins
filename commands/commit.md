# Claude Command: Commit

此命令帮助你创建格式规范的提交，包含符合约定式提交规范的消息和表情符号。

## 使用方法

要创建提交，只需输入：
```
/commit
```

或带选项：
```
/commit --no-verify
```

## 此命令的功能

1. 除非使用`--no-verify`指定，否则会自动运行提交前检查：
   - `pnpm lint` 确保代码质量
   - `pnpm build` 验证构建是否成功
   - `pnpm generate:docs` 更新文档
2. 使用`git status`检查已暂存的文件
3. 如果没有暂存文件，会自动使用`git add`添加所有修改和新增的文件
4. 执行`git diff`以了解要提交的更改内容
5. 分析差异以确定是否存在多个不同的逻辑更改
6. 如果检测到多个不同的更改，建议将提交拆分为多个较小的提交
7. 对于每个提交（如果未拆分则为单个提交），使用带表情符号的约定式提交格式创建提交消息

## 提交的最佳实践

- **提交前验证**：确保代码已通过 lint 检查、构建正确且文档已更新
- **原子提交**：每个提交应包含相关的、为单一目的服务的更改
- **拆分大型更改**：如果更改涉及多个方面，将它们拆分为单独的提交
- **约定式提交格式**：使用`<类型>: <描述>`的格式，其中类型包括：
  - `feat`：新功能
  - `fix`：错误修复
  - `docs`：文档更改
  - `style`：代码风格更改（格式等）
  - `refactor`：既不修复错误也不添加功能的代码更改
  - `perf`：性能改进
  - `test`：添加或修复测试
  - `chore`：对构建过程、工具等的更改
- **现在时、祈使语气**：提交消息写成命令形式（例如，"add feature" 而不是 "added feature"）
- **简洁的第一行**：第一行保持在72个字符以内
- **表情符号**：每种提交类型都配有相应的表情符号：
  - ✨ `feat`：新功能
  - 🐛 `fix`：错误修复
  - 📝 `docs`：文档
  - 💄 `style`：格式/风格
  - ♻️ `refactor`：代码重构
  - ⚡️ `perf`：性能改进
  - ✅ `test`：测试
  - 🔧 `chore`：工具、配置
  - 🚀 `ci`：CI/CD 改进
  - 🗑️ `revert`：撤销更改
  - 🧪 `test`：添加失败测试
  - 🚨 `fix`：修复编译器/检查器警告
  - 🔒️ `fix`：修复安全问题
  - 👥 `chore`：添加或更新贡献者
  - 🚚 `refactor`：移动或重命名资源
  - 🏗️ `refactor`：进行架构更改
  - 🔀 `chore`：合并分支
  - 📦️ `chore`：添加或更新编译文件或包
  - ➕ `chore`：添加依赖
  - ➖ `chore`：移除依赖
  - 🌱 `chore`：添加或更新种子文件
  - 🧑‍💻 `chore`：改善开发者体验
  - 🧵 `feat`：添加或更新与多线程或并发相关的代码
  - 🔍️ `feat`：改进SEO
  - 🏷️ `feat`：添加或更新类型
  - 💬 `feat`：添加或更新文本和文字
  - 🌐 `feat`：国际化和本地化
  - 👔 `feat`：添加或更新业务逻辑
  - 📱 `feat`：致力于响应式设计
  - 🚸 `feat`：改善用户体验/可用性
  - 🩹 `fix`：非关键问题的简单修复
  - 🥅 `fix`：捕获错误
  - 👽️ `fix`：因外部API更改而更新代码
  - 🔥 `fix`：移除代码或文件
  - 🎨 `style`：改进代码结构/格式
  - 🚑️ `fix`：关键热修复
  - 🎉 `chore`：开始一个项目
  - 🔖 `chore`：发布/版本标签
  - 🚧 `wip`：进行中的工作
  - 💚 `fix`：修复CI构建
  - 📌 `chore`：将依赖项固定到特定版本
  - 👷 `ci`：添加或更新CI构建系统
  - 📈 `feat`：添加或更新分析或跟踪代码
  - ✏️ `fix`：修复拼写错误
  - ⏪️ `revert`：撤销更改
  - 📄 `chore`：添加或更新许可证
  - 💥 `feat`：引入破坏性更改
  - 🍱 `assets`：添加或更新资源
  - ♿️ `feat`：改善可访问性
  - 💡 `docs`：添加或更新源代码中的注释
  - 🗃️ `db`：执行与数据库相关的更改
  - 🔊 `feat`：添加或更新日志
  - 🔇 `fix`：移除日志
  - 🤡 `test`：模拟事物
  - 🥚 `feat`：添加或更新彩蛋
  - 🙈 `chore`：添加或更新.gitignore文件
  - 📸 `test`：添加或更新快照
  - ⚗️ `experiment`：进行实验
  - 🚩 `feat`：添加、更新或移除功能标志
  - 💫 `ui`：添加或更新动画和过渡
  - ⚰️ `refactor`：移除死代码
  - 🦺 `feat`：添加或更新与验证相关的代码
  - ✈️ `feat`：改进离线支持

## 拆分提交的指导原则

分析差异时，考虑根据以下标准拆分提交：

1. **不同的关注点**：对代码库不相关部分的更改
2. **不同类型的更改**：混合了功能、修复、重构等
3. **文件模式**：对不同类型文件的更改（例如，源代码与文档）
4. **逻辑分组**：分开理解或审查会更容易的更改
5. **大小**：如果拆分后会更清晰的大型更改

## 示例

良好的提交消息：
- ✨ feat: 添加用户认证系统
- 🐛 fix: 解决渲染过程中的内存泄漏
- 📝 docs: 更新API文档以包含新端点
- ♻️ refactor: 简化解析器中的错误处理逻辑
- 🚨 fix: 解决组件文件中的检查器警告
- 🧑‍💻 chore: 改进开发者工具设置流程
- 👔 feat: 实现交易验证的业务逻辑
- 🩹 fix: 解决头部的 minor 样式不一致问题
- 🚑️ fix: 修补认证流程中的关键安全漏洞
- 🎨 style: 重组组件结构以提高可读性
- 🔥 fix: 移除已弃用的遗留代码
- 🦺 feat: 为用户注册表单添加输入验证
- 💚 fix: 解决CI管道测试失败问题
- 📈 feat: 实现用户参与度的分析跟踪
- 🔒️ fix: 加强认证密码要求
- ♿️ feat: 改善屏幕阅读器的表单可访问性

拆分提交的示例：
- 第一次提交：✨ feat: 添加新的solc版本类型定义
- 第二次提交：📝 docs: 更新新solc版本的文档
- 第三次提交：🔧 chore: 更新package.json依赖项
- 第四次提交：🏷️ feat: 为新API端点添加类型定义
- 第五次提交：🧵 feat: 改进工作线程中的并发处理
- 第六次提交：🚨 fix: 解决新代码中的 lint 问题
- 第七次提交：✅ test: 为新solc版本功能添加单元测试
- 第八次提交：🔒️ fix: 更新有安全漏洞的依赖项

## 命令选项

- `--no-verify`：跳过运行提交前检查（lint、build、generate:docs）

## 重要说明

- 默认情况下，会运行提交前检查（`pnpm lint`、`pnpm build`、`pnpm generate:docs`）以确保代码质量
- 如果这些检查失败，会询问你是要继续提交还是先修复问题
- 如果特定文件已暂存，命令将只提交这些文件
- 如果没有暂存文件，它会自动暂存所有修改和新增的文件
- 提交消息将根据检测到的更改构建
- 提交前，命令会检查差异以确定多个提交是否更合适
- 如果建议多个提交，它将帮助你分别暂存和提交更改
- 始终检查提交差异以确保消息与更改匹配
